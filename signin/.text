getRedirectResult(auth)
    .then((result) => {
        if (!result) return;
        const user = result.user;
        console.log(user.email);

        const users = Object.values(data).find(
            item => item.userEmail === user.email
        );
        if (users) {
            console.log(users);
            if (users.userType == 'donor') {
                setTimeout(() => {
                    user ? window.location.href = '../donate/donate.html' : window.location.href = '../signup/signup.html'
                }, 1500
                )
            } else {
                setTimeout(() => {
                    user ? window.location.href = '../find_food/find_food.html' : window.location.href = '../signup/signup.html'
                }, 1500)
            }
        } else {
            console.log('not found');
            deleteUser(user).then(() => {
                setTimeout(() => {
                    window.location.href = '../signup/signup.html'
                })
            }).catch((error) => {
                // An error ocurred
                console.log("couldn't delete");

                // ...
            });
        }
    }).catch((error) => {
        // Handle Errors here.
        const errorCode = error.code;
        const errorMessage = error.message;
        // The email of the user's account used.
        const email = error.customData.email;
        // The AuthCredential type that was used.
        const credential = GoogleAuthProvider.credentialFromError(error);
         console.error("Redirect error:", error);
        // ...
    });
    // onAuthStateChanged(auth, (user) => {
    //     if (!user) return;
    
    //     console.log('User signed in:', user.email);
    
    //     const users = Object.values(data).find(
    //         item => item.userEmail === user.email
    //     );
    
    //     if (users?.userType === 'donor') {
    //         window.location.href = '../donate/donate.html';
    //     } else {
    //         window.location.href = '../find_food/find_food.html';
    //     }
    // });